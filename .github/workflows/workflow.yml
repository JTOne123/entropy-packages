name: CI

on: [push]

jobs:
  build:

    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v1
      name: Checkout
    - name: Get dotnet version
      run: dotnet --info
    - name: Add GPR Source using dotnet.exe      
      env:
        DOTNET_SKIP_FIRST_TIME_EXPERIENCE: 1
      run: dotnet nuget add source https://nuget.pkg.github.com/anangaur/index.json --name "GPR" -u anangaur  --password ${{ secrets.GITHUB_TOKEN }} --store-password-in-clear-text
    - name: dotnet build
      run: dotnet build
    - name: Setup NuGet.exe for use with actions
      uses: NuGet/setup-nuget@v1.0.2 
    - name: dotnet nuget push
      run: dotnet nuget push '*\**\*.nupkg' -source "GPR" -SkipDuplicate

